<!DOCTYPE html><html lang="en"><head><title>app/server/views/images</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../"><meta name="groc-document-path" content="app/server/views/images"><meta name="groc-project-path" content="app/server/views/images.jade"><meta name="groc-github-url" content="https://github.com/jlengstorf/workshop-supercharge-your-front-end-workflow"><link rel="stylesheet" type="text/css" media="all" href="../../../assets/style.css"><script type="text/javascript" src="../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/jlengstorf/workshop-supercharge-your-front-end-workflow/blob/master/app/server/views/images.jade">app/server/views/images.jade</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper">extends ../layouts/default

block title
  title Optimize Images | <span class="hljs-comment">#{title}</span>

block content
  h1 Image Optimization
  p.
    To keep our pages loading quickly, we should be paying attention <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span>
    sizes <span class="hljs-operator">of</span> our images. Using Gulp, we can quickly automate <span class="hljs-operator">a</span> lot <span class="hljs-operator">of</span> our image
    compression <span class="hljs-operator">with</span> just <span class="hljs-operator">a</span> few <span class="hljs-keyword">lines</span> <span class="hljs-operator">of</span> code.</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr></div></div><div class="code"><div class="wrapper">  - <span class="hljs-keyword">var</span> title = <span class="hljs-string">"Compressed Images"</span>;
  - <span class="hljs-keyword">var</span> name = <span class="hljs-string">'compressed-images'</span>;

  .example(data-name=title)
    h2= title

    p.
      With the plugin #[code gulp-imagemin] our images can be automatically
      compressed.

    .image-holder.example-result--patterned.show-<span class="hljs-class"><span class="hljs-keyword">class</span>-<span class="hljs-title">names</span>
      .<span class="hljs-title">image</span>(<span class="hljs-title">data</span>-<span class="hljs-title">size</span></span>=<span class="hljs-string">"231 KB"</span>)
        img(src=<span class="hljs-string">"/images/compressed-images_uncompressed.png"</span> alt=<span class="hljs-string">""</span>)
      .image(data-size=<span class="hljs-string">"35 KB"</span>)
        img(src=<span class="hljs-string">"/images/compressed-images_compressed.png"</span> alt=<span class="hljs-string">""</span>)

    pre.language-javascript
      code.
        <span class="hljs-comment">// ## Compress images using `gulp-imagemin` for smaller file sizes</span>
        gulp.task(<span class="hljs-string">'images'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(  )</span> </span>{

          <span class="hljs-comment">// PNGQuant is better at PNG compression (the output is similar to TinyPNG).</span>
          <span class="hljs-keyword">var</span> pngquant = <span class="hljs-built_in">require</span>(<span class="hljs-string">'imagemin-pngquant'</span>);

          <span class="hljs-comment">// - Target uncompressed image files</span>
          gulp.src(paths.images.src)

            <span class="hljs-comment">// - Only compress files that are new or have changed</span>
            .pipe(changed(paths.images.destDir))

            <span class="hljs-comment">// - For debugging only: show which files are being processed</span>
            .pipe(using())

            <span class="hljs-comment">// - Compress the images</span>
            .pipe(imagemin({
              progressive: <span class="hljs-literal">true</span>,
              use: [ pngquant() ]
            }))

            <span class="hljs-comment">// - Save the compressed images</span>
            .pipe(gulp.dest(paths.images.destDir));

        });</div></div></div></div></body></html>